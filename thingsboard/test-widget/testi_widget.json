{
  "alias": "testi_widget",
  "name": "testi widget",
  "descriptor": {
    "type": "timeseries",
    "sizeX": 11.5,
    "sizeY": 7.5,
    "resources": [],
    "templateHtml": "<div id=\"testwidget\"></div>",
    "templateCss": ".legend {\n    font-size: 13px;\n    line-height: 10px;\n}\n\n.legend table { \n    border-spacing: 0px;\n    border-collapse: separate;\n}\n\n.mouse-events .flot-overlay {\n    cursor: crosshair; \n}",
    "controllerScript": "self.onInit = function() {\n    console.log(\"HELLO\");\n}\n\nself.onDataUpdated = function() {\n    var subs = self.ctx.subscriptions;\n    var divi = document.getElementById('testwidget');\n    divi.innerHTML = \"\";\n    console.log(subs);\n    Object.keys(subs).forEach(function(key) {\n        var datasources = subs[key].data;\n        console.log(datasources.length);\n        for (var ii = 0; ii < datasources.length; ii++) {\n            var label = subs[key].data[ii].dataKey[\"label\"];\n            var datapoints = subs[key].data[ii].data;\n            var sum = 0;\n            console.log(label);\n            for (var i = 0; i < datapoints.length; i++) {\n                // Iterate over numeric indexes from 0 to 5, as everyone expects.\n                //console.log(datapoints[i]);\n                sum = sum + datapoints[i][1];\n                \n            }\n            \n            divi.innerHTML = divi.innerHTML + label + \" avg: \" + sum/datapoints.length+\"<br>\";\n\n        }\n\n\n\n    });\n\n\n}\n\nself.onResize = function() {\n\n}\n\nself.onEditModeChanged = function() {\n\n}\n\nself.onMobileModeChanged = function() {\n\n}\n\nself.getSettingsSchema = function() {\n\n}\n\nself.getDataKeySettingsSchema = function() {\n\n}\n\nself.onDestroy = function() {\n\n}",
    "settingsSchema": "{}",
    "dataKeySettingsSchema": "{}",
    "defaultConfig": "{\"datasources\":[{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Sin\",\"color\":\"#2196f3\",\"settings\":{},\"_hash\":0.36329290203044873,\"funcBody\":\"return Math.round(1000*Math.sin(time/5000));\"},{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Random\",\"color\":\"#f44336\",\"settings\":{},\"_hash\":0.3303715903999145,\"funcBody\":\"var value = prevValue + Math.random() * 100 - 50;\\nvar multiplier = Math.pow(10, 2 || 0);\\nvar value = Math.round(value * multiplier) / multiplier;\\nif (value < -1000) {\\n\\tvalue = -1000;\\n} else if (value > 1000) {\\n\\tvalue = 1000;\\n}\\nreturn value;\"}]},{\"type\":\"function\",\"name\":\"function\",\"dataKeys\":[{\"name\":\"f(x)\",\"type\":\"function\",\"label\":\"Cossi\",\"color\":\"#4caf50\",\"settings\":{},\"_hash\":0.7555737153605452,\"funcBody\":\"return Math.round(1000*Math.cos(time/5000));\"}]}],\"timewindow\":{\"realtime\":{\"timewindowMs\":60000}},\"showTitle\":true,\"backgroundColor\":\"#fff\",\"color\":\"rgba(0, 0, 0, 0.87)\",\"padding\":\"8px\",\"settings\":{},\"title\":\"testi widget\",\"dropShadow\":true,\"enableFullscreen\":true,\"titleStyle\":{\"fontSize\":\"16px\",\"fontWeight\":400},\"mobileHeight\":null,\"useDashboardTimewindow\":true,\"showLegend\":false}"
  }
}